<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>

    <!-- This header isn't working here, I"m not sure why 
     <script>
      $(document).ready(function(){
        var $head = $('head');
            $head.html('');
            $head.css({'display': 'block', 'border-color': '1px solid #967', 'text-align': 'center', 'font-size': 'xx-large', 'font-family': 'Helvetica'});
            $body.text('Welcome to Twittler!');

      });
      </script>
    -->
  
  </head>
  <h2></h2>
  <body bgcolor="#E6E6FA">
    
    <script>
      $(document).ready(function(){


        var $head = $('head');
        $head.html('img src = "twittler_logo.jpg"');
        $head.css({'background-color': '#1106ac', 'display': 'block', 'text-align': 'center', 'font-size': 'xx-large', 'font-family': 'Helvetica', 'color': '#ffffff', 'width': '500px', 'box-sizing': 'border-box', 'box-align': 'center', 'position': 'absolute', 'left': '25%'});
        $head.prepend('<img id="Twittler" src="twittler_logo.jpg" />');
        $head.text('Welcome to Twittler!');

        var $h2 = $('h2');
        $h2.html('<div> See new Tweets</div>');
        $h2.css({'box-sizing': 'border-box', 'margin': '0 auto', 'width': '500px', 'position': 'absolute', 'font-size': 'large', 'color': '#250382', 'background-color': '#8c84fb'});
        $h2.appendTo($head);

         //var index = streams.home.length -1;
        var newIndex = 0;
        var currentUser = ''  
        $h2.on('click', function(){
          
        if(streams.home.length -1 >= newIndex){
          var tweet = streams.home[newIndex];
          var $tweet = $('<div></div>');
          
          currentUser = tweet.user;
          var $currentUser = $('<a href=' + currentUser + '.html></a>');
          
          $currentUser.css({'box-sizing': 'border-box','border': '2px solid #fffff','width': '500px','color': 'blue', 'font-size': 'medium'});
          $currentUser.text('@' + currentUser+ ':')
        
          

          $currentUser.on('click', function(event) 
          { 
               event.preventDefault(); 
          });

          
            $tweet.css({'box-sizing': 'border-box', 'box-align': 'center', 'border': '2px solid #fffff','color': '#1106ac', 'font-size': 'medium', 'background-color': '#ffffff'});
            $tweet.attr("href", "http://www.google.com/");

            $tweet.text(tweet.message);
            

            var $timeStamp = $('<div></div>');
            $timeStamp.text('Written: ' + tweet.created_at);
            $timeStamp.css({'display': 'block', 'background-color': '#8c84fb','border-color': '1px solid #250382', 'margin-bottom': '10px', 'font-size': 'small'});

            $timeStamp.prependTo($body);
            $tweet.prependTo($body);
            $currentUser.prependTo($body);
            
          
            newIndex++
            scheduleNextTweet();
          
        }

        });
       
        var $body = $('body');
        $body.css({'display': 'block', 'text-align': 'center', 'font-family': 'Helvetica', 'box-sizing': 'border-box', 'box-align': 'center', 'position': 'absolute', 'font-size': 'large', 'color': '#250382', 'height': '500px', 'width': '500px', 'margin-top': '5px', 'margin-bottom': '20px', 'margin-left': 'auto', 'margin-right': 'auto'});
        $body.appendTo($h2);

        // This still needs to become user-specific. Needs to prevent the default action of the click from H2. 
        // Hyperlinks in the body work, but the individual html pages are not referencing the correct portions.

        $body.on('click', function(event){
          event.preventDefault(); 
          var userHistory = streams.users[currentUser];
          for (var i = 0; i < userHistory.length; i++){
            var $userHistory = $('<div></div>');
            $userHistory.text('History: @ ' + streams.users[currentUser][i].user + ': '+ streams.users[currentUser][i].message + ', Written: ' + streams.users[currentUser][i].created_at);

            $userHistory.prependTo($body);

           }

        });
         

      });

    </script>
    
  </body>
</html>
